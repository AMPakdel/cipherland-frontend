"use strict";(self.webpackChunkcipherland_code=self.webpackChunkcipherland_code||[]).push([[7959],{97959:function(e,t,r){r.r(t),r.d(t,{default:function(){return V}});var n=r(50189),a=r(65811),o=r(60903),l=r(14565),i=r(77621),s=r(90527),c=r(4019),u=r(90694),d=r(98225),f=r(78684),m=r(78771),p=r(25358),h=r(44028),x=r(12921),v=r(14979),y=r(89310),Z=r(35269),g=r(99898);var w=function(e){var t=(0,Z.useDispatch)(),r=(0,p.Gc)(),n=r.formState,a=r.watch,o=r.getValues,l=n.isValid,i=n.dirtyFields,s=a("title"),c=(0,y.Z)(),u=(0,g.s0)();return{isValid:l,dirtyFields:i,title:s,theme:c,handleSaveRole:function(){t((0,v.x$)(o())).then((function(){u("/role-permission/roles")}))},handleRemoveRole:function(){t((0,v.l5)()).then((function(){u("/role-permission/roles")}))}}},T=r(40864);var R=function(e){var t=e.t,r=w(e),n=r.isValid,a=r.dirtyFields,o=r.title,i=r.theme,s=r.handleSaveRole,u=r.handleRemoveRole;return(0,T.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,T.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,T.jsx)(d.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,T.jsxs)(c.Z,{className:"flex items-center sm:mb-12",component:f.Link,role:"button",to:"/role-permission/roles",color:"inherit",children:[(0,T.jsx)(x.default,{size:20,children:"ltr"===i.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,T.jsx)("span",{className:"flex mx-4 font-medium",children:t("ROLES")})]})}),(0,T.jsxs)("div",{className:"flex items-center max-w-full",children:[(0,T.jsx)(d.E.div,{className:"hidden sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}}}),(0,T.jsx)(d.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:(0,T.jsx)(c.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:o||t("New Role")})})]})]}),(0,T.jsxs)(d.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[!o||(0,T.jsx)(l.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:u,startIcon:(0,T.jsx)(x.default,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:t("REMOVE")}),(0,T.jsx)(l.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:m.default.isEmpty(a)||!n,onClick:s,children:t("SAVE")})]})]})},b=r(95338),j=r(11026),k=r(66845),A=r(13597),S=r(33416),E=r(82426),M=r(61927),N=r(38708);var C=function(e){var t=(0,N.$)("rolesPage").t,r=S.Ry().shape({title:S.Z_().required(t("YOU_MUST_ENTER")).min(3,t("MUST_BE_AT_LEAST_CHARACTERS").replace("%param1%",t("TITLE")).replace("%param2%",3))}),n=(0,Z.useDispatch)(),a=(0,k.useState)(0),o=(0,j.Z)(a,2),l=o[0],i=o[1],s=(0,Z.useSelector)(v.oM),c=(0,E.Z)((function(e){return e.breakpoints.down("lg")})),u=(0,g.UO)(),d=(0,k.useState)(!1),f=(0,j.Z)(d,2),m=f[0],h=f[1],x=(0,p.cI)({mode:"onChange",defaultValues:{},resolver:(0,A.X)(r)}),y=x.reset,w=x.watch,T=(x.control,x.onChange,x.formState,w());return(0,M.useDeepCompareEffect)((function(){!function(){var e=u.roleId;"new"===e?n((0,v.A8)()):n((0,v.cY)(e)).then((function(e){e.payload||h(!0)}))}()}),[n,u]),(0,k.useEffect)((function(){s&&y(s)}),[s,y]),(0,k.useEffect)((function(){return function(){n((0,v.kb)()),h(!1)}}),[n]),{noRole:m,role:s,routeParams:u,methods:x,isMobile:c,form:T,tabValue:l,setTabValue:i,handleTabChange:function(e,t){i(t)}}};var V=(0,u.Z)("roleManager",h.Z)((function(e){var t=C(e),r=t.noRole,u=t.role,h=t.routeParams,x=t.methods,v=t.isMobile,y=t.form,Z=t.tabValue,g=(t.setTabValue,t.handleTabChange),w=(0,N.$)("rolesPage").t;return r?(0,T.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,T.jsx)(c.Z,{color:"text.secondary",variant:"h5",children:w("There is no such role!")}),(0,T.jsx)(l.Z,{className:"mt-24",component:f.Link,variant:"outlined",to:"/role-permission/roles",color:"inherit",children:w("Go to Roles Page")})]}):m.default.isEmpty(y)||u&&h.roleId!==(null===u||void 0===u?void 0:u.uuid)&&"new"!==h.roleId?(0,T.jsx)(a.default,{}):(0,T.jsx)(p.RV,(0,n.Z)((0,n.Z)({},x),{},{children:(0,T.jsx)(o.Z,{header:(0,T.jsx)(R,{t:w}),content:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(s.Z,{value:Z,onChange:g,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64 border-b-1"},children:(0,T.jsx)(i.Z,{className:"h-64",label:w("Role Information")})}),(0,T.jsx)("div",{className:"p-16 sm:p-24 max-w-3xl",children:(0,T.jsx)("div",{className:0!==Z?"hidden":"",children:(0,T.jsx)(b.Z,{model:null===u||void 0===u?void 0:u.model,t:w})})})]}),scroll:v?"normal":"content"})}))}))},44028:function(e,t,r){var n=r(45129),a=r(30737),o=r(14979),l=(0,n.UY)({roles:a.ZP,role:o.ZP});t.Z=l},14979:function(e,t,r){r.d(t,{A8:function(){return v},cY:function(){return f},kb:function(){return y},l5:function(){return m},oM:function(){return Z},x$:function(){return p}});var n,a=r(64649),o=r(50189),l=r(11092),i=r(27791),s=r(95514),c=r(75866),u=r(57495),d={model:[{key:"title",value:"",type:"text",required:!0}]},f=(0,s.createAsyncThunk)("roleManager/role/getRole",function(){var e=(0,i.Z)((0,l.Z)().mark((function e(t){var r,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)("GET","/api/role/".concat(t),{Authorization:"Bearer "+u.Z.getAccessToken()},{},{});case 2:return r=e.sent,e.next=5,r.data;case 5:return(n=e.sent).model=d.model,e.abrupt("return",void 0===n?null:n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=(0,s.createAsyncThunk)("roleManager/role/removeRole",function(){var e=(0,i.Z)((0,l.Z)().mark((function e(t,r){var n,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,n=r.getState,a=n().roleManager.role.id,e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),p=(0,s.createAsyncThunk)("roleManager/role/saveRole",function(){var e=(0,i.Z)((0,l.Z)().mark((function e(t,r){var n,a,o,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.dispatch,n=r.getState,delete t.model,a=n().roleManager.role.uuid,delete t.uuid,delete t.createdAt,delete t.updatedAt,!a){e.next=12;break}return e.next=9,(0,c.Z)("PATCH","/api/role/".concat(a),{Authorization:"Bearer "+u.Z.getAccessToken()},{},t);case 9:o=e.sent,e.next=15;break;case 12:return e.next=14,(0,c.Z)("POST","/api/role",{Authorization:"Bearer "+u.Z.getAccessToken()},{},t);case 14:o=e.sent;case 15:return e.next=17,o.data;case 17:return i=e.sent,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),h=(0,s.createSlice)({name:"roleManager/role",initialState:null,reducers:{resetRole:function(){return d},newRole:{reducer:function(e,t){return t.payload},prepare:function(e){return{payload:(0,o.Z)({uuid:"",title:""},d)}}}},extraReducers:(n={},(0,a.Z)(n,f.fulfilled,(function(e,t){return t.payload})),(0,a.Z)(n,p.fulfilled,(function(e,t){return t.payload})),(0,a.Z)(n,m.fulfilled,(function(e,t){return null})),n)}),x=h.actions,v=x.newRole,y=x.resetRole,Z=function(e){return e.roleManager.role};t.ZP=h.reducer},30737:function(e,t,r){r.d(t,{F3:function(){return u},OF:function(){return y},a0:function(){return v},cz:function(){return Z},g$:function(){return p},rs:function(){return d}});var n,a=r(64649),o=r(11092),l=r(27791),i=r(95514),s=r(75866),c=r(57495),u=(0,i.createAsyncThunk)("roleManager/roles/getRoles",(0,l.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("GET","/api/role/all",{Authorization:"Bearer "+c.Z.getAccessToken()},{},{});case 2:return t=e.sent,e.next=5,t.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))),d=(0,i.createAsyncThunk)("roleManager/roles",function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,r.getState,e.abrupt("return",roleIds);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),f=(0,i.createEntityAdapter)({selectId:function(e){return e.uuid}}),m=f.getSelectors((function(e){return e.roleManager.roles})),p=m.selectAll,h=(m.selectById,(0,i.createSlice)({name:"roleManager/roles",initialState:f.getInitialState({searchText:"",total:0}),reducers:{setRolesSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},setRolesTotal:{reducer:function(e,t){e.total=t.payload},prepare:function(e){return{payload:e.target.value||0}}}},extraReducers:(n={},(0,a.Z)(n,u.fulfilled,(function(e,t){return e.total=t.payload.total,f.setAll(e,t.payload.data)})),(0,a.Z)(n,d.fulfilled,(function(e,t){return f.removeMany(e,t.payload)})),n)})),x=h.actions,v=x.setRolesSearchText,y=(x.setRolesTotal,function(e){return e.roleManager.roles.searchText}),Z=function(e){return e.roleManager.roles.total};t.ZP=h.reducer}}]);