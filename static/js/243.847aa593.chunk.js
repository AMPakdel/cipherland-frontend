"use strict";(self.webpackChunkcipherland_code=self.webpackChunkcipherland_code||[]).push([[243],{70243:function(e,r,l){l.r(r),l.d(r,{default:function(){return T}});var a=l(64649),t=l(50189),n=l(11026),i=l(12921),s=l(4019),c=l(26162),o=l(14565),d=l(22042),u=l(91351),p=l(12307),x=l(21192),f=l(60801),h=l(44838),m=l(24853),v=l(98225),g=l(72706),j=l.n(g),b=l(22762),w=l(66845),N=l(35269),y=l(99898),Z=l(30501),C=l(16807),k=l(97322),E=l(89933),q=l(40864);function T(){var e,r,l=(0,N.useDispatch)(),g=(0,y.UO)(),T=(0,y.s0)(),F=(0,N.useSelector)((function(e){return(0,k.xp)(e,g.id)}));if(console.log("----------",F),!F||!F.uuid)return setTimeout((function(){return T("/apps/managepublications/all")}),500),null;var R=(0,w.useState)({}),U=(0,n.Z)(R,2),z=U[0],O=U[1],_=(0,w.useState)(function(e){var r={},l=j().cloneDeep(e);return Object.keys(l).forEach((function(e){var a;"classification"===e?r.category=null===(a=l.classification)||void 0===a?void 0:a.uuid:"province_id"===e?r.province=(0,Z.ol)(l[e]):r[e]=l[e]})),console.log(r),r}(F)),D=(0,n.Z)(_,2),L=D[0],P=D[1],I=(0,b.Ds)().enqueueSnackbar,A=(0,w.useMemo)((function(){return(0,Z.uy)(1)})),J=(0,w.useState)(null),M=(0,n.Z)(J,2),V=M[0],B=M[1],G=(0,w.useRef)(null),H=(0,w.useState)(null),K=(0,n.Z)(H,2),Q=K[0],W=K[1],X=(0,w.useRef)(null),Y=(0,N.useSelector)(C.sI),$=function(e,r){P((0,t.Z)((0,t.Z)({},L),{},(0,a.Z)({},e,r)))};function ee(){T("/apps/managepublications/all")}return(0,w.useEffect)((function(){l((0,C.q)())}),[]),(0,q.jsxs)("div",{className:"w-full min-h-screen overflow-auto max-w-[1200px] px-16 lg:px-48",children:[(0,q.jsxs)("div",{className:"w-full flex flex-col lg:flex-row justify-between",children:[(0,q.jsxs)(s.Z,{component:v.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"flex items-center font-semibold text-12 lg:text-16 leading-10 \r text-right text-[#1A3141]",children:[(0,q.jsx)(i.default,{className:"ml-10",size:20,children:"feather:grid"}),"\u0627\u0641\u0632\u0648\u062f\u0646 \u0627\u0646\u062a\u0634\u0627\u0631\u0627\u062a\u06cc\u200c"]}),(0,q.jsxs)(c.Z,{component:v.E.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex justify-end min-w-full lg:min-w-0 shadow-0",children:[(0,q.jsx)(o.Z,{className:"mx-8",variant:"outlined",color:"primary",onClick:ee,children:"\u0627\u0646\u0635\u0631\u0627\u0641"}),(0,q.jsx)(o.Z,{className:"mx-8",variant:"contained",color:"primary",onClick:function(){(function(){O({});var e={},r=!0;return L.title||(r=!1,e.title=!0),L.province&&L.province.id||(r=!1,e.province=!0),L.address||(r=!1,e.address=!0),L.email&&(0,E.J)(L.email)||(r=!1,e.email=!0),(!L.phoneNumber||L.phoneNumber.length<4)&&(r=!1,e.phoneNumber=!0),L.category||(r=!1,e.category=!0),L.description||(r=!1,e.description=!0),O(e),r})()&&(console.log(L),l((0,k.y0)({data:S(F,L),uuid:g.id})).then((function(e){var r;null!==(r=e.payload)&&void 0!==r&&r.uuid?(I("\u0627\u0646\u062a\u0634\u0627\u0631\u0627\u062a\u06cc \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0633\u0627\u062e\u062a\u0647 \u0634\u062f",{variant:"success"}),ee()):I("\u062e\u0637\u0627 \u062f\u0631 \u0627\u06cc\u062c\u0627\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0646\u062a\u0634\u0627\u0631\u0627\u062a\u06cc",{variant:"error"})})))},children:"\u0630\u062e\u06cc\u0631\u0647"})]})]}),(0,q.jsxs)("div",{className:"relative w-full max-w-[960px] flex my-36 flex-wrap gap-[24px] lg:gap-[60px] px-16 lg:px-0",children:[(0,q.jsx)(d.Z,{className:"w-full lg:w-[calc(50%-30px)]",error:z.title,id:"standard-error-helper-text",label:"\u0646\u0627\u0645 \u0645\u0631\u06a9\u0632",value:L.title,onChange:function(e){return $("title",e.target.value)},helperText:z.title,required:!0,variant:"standard"}),(0,q.jsx)(u.Z,{className:"w-full lg:w-[calc(50%-30px)]",disablePortal:!0,options:A,value:null===(e=L.province)||void 0===e?void 0:e.id,inputValue:null===(r=L.province)||void 0===r?void 0:r.label,onChange:function(e,r){return $("province",r)},disableClearable:!0,renderInput:function(e){return(0,q.jsx)(d.Z,(0,t.Z)((0,t.Z)({required:!0,variant:"standard"},e),{},{error:z.province,helperText:z.province&&"\u0645\u0642\u062f\u0627\u0631 \u0627\u0633\u062a\u0627\u0646 \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",label:"\u0627\u0633\u062a\u0627\u0646"}))}}),(0,q.jsx)(d.Z,{className:"w-full",error:z.address,id:"standard-error-helper-text",label:"\u0622\u062f\u0631\u0633 \u0645\u0631\u06a9\u0632",value:L.address,onChange:function(e){return $("address",e.target.value)},helperText:z.address,required:!0,variant:"standard"}),(0,q.jsx)(d.Z,{className:"w-full lg:w-[calc(50%-30px)]",error:z.website,id:"standard-error-helper-text",label:"\u0648\u0628\u0633\u0627\u06cc\u062a",value:L.website,onChange:function(e){return $("website",e.target.value)},helperText:z.website,variant:"standard"}),(0,q.jsx)(d.Z,{className:"w-full lg:w-[calc(50%-30px)]",error:z.email,id:"standard-error-helper-text",label:"\u0627\u06cc\u0645\u06cc\u0644",value:L.email,onChange:function(e){return $("email",e.target.value)},helperText:z.email,required:!0,variant:"standard"}),(0,q.jsx)(d.Z,{className:"w-full lg:w-[calc(50%-30px)]",error:z.phoneNumber,id:"standard-error-helper-text",label:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0645\u0627\u0633",value:L.phoneNumber,onChange:function(e){return $("phoneNumber",e.target.value)},helperText:z.phoneNumber,required:!0,variant:"standard"}),(0,q.jsxs)(p.Z,{className:"w-full lg:w-[calc(50%-30px)]",children:[(0,q.jsx)(x.Z,{variant:"standard",htmlFor:"uncontrolled-native",children:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc \u0645\u0648\u0636\u0648\u0639\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u0645\u0631\u06a9\u0632 *"}),(0,q.jsx)(f.Z,{error:z.category,id:"standard-error-helper-text",label:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc \u0645\u0648\u0636\u0648\u0639\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u0645\u0631\u06a9\u0632",value:L.category,onChange:function(e){return $("category",e.target.value)},helperText:z.category,required:!0,variant:"standard",children:Y&&Y.map((function(e,r){return(0,q.jsx)(h.Z,{value:e.uuid,children:e.title},r)}))})]}),(0,q.jsx)(d.Z,{className:"w-full",multiline:!0,rows:4,error:z.description,id:"standard-error-helper-text",label:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a",value:L.description,onChange:function(e){return $("description",e.target.value)},helperText:z.description,required:!0,variant:"standard"}),(0,q.jsxs)("div",{className:"relative flex justify-between pt-24 border-b-1 !border-gray-600 items-center w-full lg:w-[calc(50%-30px)]",children:[(0,q.jsx)("div",{className:"absolute top-0 right-0 text-14 text-gray-800",children:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0644\u0648\u06af\u0648\u06cc \u0645\u0631\u06a9\u0632"}),(0,q.jsx)(m.Z,{className:"object-cover w-96 h-64 rounded-2xl",src:V}),(0,q.jsx)("input",{className:"hidden",ref:G,type:"file",accept:".png,.jpg,.jpeg",onChange:function(e){$("logoFile",e.target.files[0]),B(URL.createObjectURL(e.target.files[0]))}}),(0,q.jsxs)("div",{className:"flex flex-col",children:[(0,q.jsxs)(o.Z,{className:"w-[120px]",color:"primary",onClick:function(){$("logoFile",null),B(null)},children:[(0,q.jsx)(i.default,{className:"text-[#11C5E3]",size:16,children:"heroicons-solid:trash"}),(0,q.jsx)(s.Z,{className:"font-medium text-12 leading-4 text-right text-[#11C5E3] ",component:"h3",children:"\u062d\u0630\u0641 \u0639\u06a9\u0633"})]}),(0,q.jsxs)(o.Z,{className:"w-[120px]",color:"primary",onClick:function(){var e;return null===G||void 0===G||null===(e=G.current)||void 0===e?void 0:e.click()},children:[(0,q.jsx)(i.default,{className:"text-[#11C5E3]",size:18,children:"heroicons-solid:plus"}),(0,q.jsx)(s.Z,{className:"font-medium text-12 leading-4 text-right text-[#11C5E3] ",component:"h3",children:"\u0622\u067e\u0644\u0648\u062f \u0639\u06a9\u0633"})]})]})]}),(0,q.jsxs)("div",{className:"relative flex justify-between pt-24 border-b-1 !border-gray-600 items-center w-full lg:w-[calc(50%-30px)]",children:[(0,q.jsx)("div",{className:"absolute top-0 right-0 text-14 text-gray-800",children:"\u0627\u0641\u0632\u0648\u062f\u0646 \u062a\u0635\u0648\u06cc\u0631 \u0633\u0631\u0628\u0631\u06af \u0645\u0631\u06a9\u0632"}),(0,q.jsx)(m.Z,{className:"object-cover w-96 h-64 rounded-2xl",src:Q}),(0,q.jsx)("input",{className:"hidden",ref:X,type:"file",accept:".png,.jpg,.jpeg",onChange:function(e){$("backgroundPicFile",e.target.files[0]),W(URL.createObjectURL(e.target.files[0]))}}),(0,q.jsxs)("div",{className:"flex flex-col",children:[(0,q.jsxs)(o.Z,{className:"w-[120px]",color:"primary",onClick:function(){$("backgroundPicFile",null),W(null)},children:[(0,q.jsx)(i.default,{className:"text-[#11C5E3]",size:16,children:"heroicons-solid:trash"}),(0,q.jsx)(s.Z,{className:"font-medium text-12 leading-4 text-right text-[#11C5E3] ",component:"h3",children:"\u062d\u0630\u0641 \u0639\u06a9\u0633"})]}),(0,q.jsxs)(o.Z,{className:"w-[120px]",color:"primary",onClick:function(){var e;return null===X||void 0===X||null===(e=X.current)||void 0===e?void 0:e.click()},children:[(0,q.jsx)(i.default,{className:"text-[#11C5E3]",size:18,children:"heroicons-solid:plus"}),(0,q.jsx)(s.Z,{className:"font-medium text-12 leading-4 text-right text-[#11C5E3] ",component:"h3",children:"\u0622\u067e\u0644\u0648\u062f \u0639\u06a9\u0633"})]})]})]})]})]})}function S(e,r){var l=new FormData;return Object.keys(r).forEach((function(a){if("tags"===a);else if("category"===a){var t;(null===(t=e.classification)||void 0===t?void 0:t.uuid)!=r.category&&l.append("classificationUuid",r[a])}else"province"===a?e.province_id!=r.province.id&&l.append("province_id",r.province.id):e[a]!=r[a]&&l.append(a,r[a])})),console.log(l),l}}}]);