"use strict";(self.webpackChunkcipherland_code=self.webpackChunkcipherland_code||[]).push([[1439],{61439:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(50189),l=t(65811),a=t(60903),s=t(14565),r=t(77621),o=t(90527),u=t(4019),d=t(43413),c=t(96089),m=t(90694),v=t(98225),f=t(78684),h=t(78771),x=t(25358),p=t(83474),y=t(12921),Z=t(73257),j=t(89310),b=t(35269),N=t(99898);var g=function(e){var n=(0,b.useDispatch)(),t=(0,x.Gc)(),i=t.formState,l=t.watch,a=t.getValues,s=i.isValid,r=i.dirtyFields,o=l("firstName"),u=(0,j.Z)(),d=(0,N.s0)();return{isValid:s,dirtyFields:r,firstName:o,theme:u,handleSaveUser:function(){n((0,Z.JR)(a())).then((function(){d("/users-management/users")}))},handleRemoveUser:function(){n((0,Z.kX)()).then((function(){d("/users-management/users")}))}}},k=t(40864);var S=function(e){var n=e.t,t=g(e),i=t.isValid,l=t.dirtyFields,a=t.firstName,r=t.theme,o=t.handleSaveUser,d=t.handleRemoveUser;return(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,k.jsx)(v.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,k.jsxs)(u.Z,{className:"flex items-center sm:mb-12",component:f.Link,role:"button",to:"/users-management/users",color:"inherit",children:[(0,k.jsx)(y.default,{size:20,children:"ltr"===r.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,k.jsx)("span",{className:"flex mx-4 font-medium",children:n("USERS")})]})}),(0,k.jsxs)("div",{className:"flex items-center max-w-full",children:[(0,k.jsx)(v.E.div,{className:"hidden sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}}}),(0,k.jsx)(v.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:(0,k.jsx)(u.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:a||n("NEW_USER")})})]})]}),(0,k.jsxs)(v.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[!a||(0,k.jsx)(s.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:d,startIcon:(0,k.jsx)(y.default,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:n("REMOVE")}),(0,k.jsx)(s.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:h.default.isEmpty(l)||!i,onClick:o,children:n("SAVE")})]})]})},w=t(95338),E=t(11026),C=t(66845),R=t(13597),V=t(33416),_=t(82426),I=t(61927),U=V.Ry().shape({firstName:V.Z_().required("You must enter a first name").min(3,"The first name must be at least 3 characters"),lastName:V.Z_().required("You must enter a last name").min(3,"The last name must be at least 3 characters"),email:V.Z_().required("You must enter a email"),photoURL:V.IX().nullable(!0),status:V.Z_().required("You must enter a status"),nationalCode:V.Z_().required("You must enter a nationalCode"),mobile:V.Z_().required("You must enter a mobile")});var q=function(e){var n=(0,b.useDispatch)(),t=(0,C.useState)(0),i=(0,E.Z)(t,2),l=i[0],a=i[1],s=(0,b.useSelector)(Z.dy),r=(0,_.Z)((function(e){return e.breakpoints.down("lg")})),o=(0,N.UO)(),u=(0,C.useState)(!1),d=(0,E.Z)(u,2),c=d[0],m=d[1],v=(0,x.cI)({mode:"onChange",defaultValues:{},resolver:(0,R.X)(U)}),f=v.reset,h=v.watch,p=(v.control,v.onChange,v.formState,h());return(0,I.useDeepCompareEffect)((function(){!function(){var e=o.userId;"new"===e?n((0,Z.W$)()):n((0,Z.PR)(e)).then((function(e){e.payload||m(!0)}))}()}),[n,o]),(0,C.useEffect)((function(){s&&f(s)}),[s,f]),(0,C.useEffect)((function(){return function(){n((0,Z.zb)()),m(!1)}}),[n]),{noUser:c,user:s,routeParams:o,methods:v,isMobile:r,form:p,tabValue:l,handleTabChange:function(e,n){a(n)}}},D=t(38708),F=t(76334),O=t(649),T=t(43782);var M=function(e){var n=(0,b.useDispatch)(e),t=(0,x.Gc)(),l=t.setValue,a=t.getValues,s=(0,b.useSelector)(Z.dy),r=h.default.map(s.user_roles,(function(e){return e.role_uuid})),o=(0,b.useSelector)(T.g$),u=(0,C.useState)([]),d=(0,E.Z)(u,2),c=d[0],m=d[1],v=(0,C.useState)([]),f=(0,E.Z)(v,2),p=f[0],y=f[1],j=(0,C.useState)(-1),g=(0,E.Z)(j,2),k=g[0],S=g[1];return(0,N.UO)(),(0,C.useEffect)((function(){if(!(k>0)){if(o.length>0){if((null===r||void 0===r?void 0:r.length)>0){var e=r;m(e),l("roles",e,{shouldDirty:!0,shouldValidate:!0})}var t=null===o||void 0===o?void 0:o.map((function(e){return r&&r.find((function(n){return n===e.uuid}))?(0,i.Z)((0,i.Z)({},e),{},{inRole:!0}):(0,i.Z)((0,i.Z)({},e),{},{inRole:!1})}));return y(t),void S(k+1)}n((0,T.F3)())}}),[o,c]),{rolesItem:p,handleClick:function(e){var n=[].concat((0,O.Z)(c),[e]);m(n);var t=(0,O.Z)(p);t.map((function(n){n.uuid===e&&(n.inRole=!0)})),y(t),l("roles",n,{shouldDirty:!0,shouldValidate:!0}),console.info("You clicked the add id.",a())},handleDelete:function(e){var n=c.filter((function(n){return n!==e}));m(n);var t=(0,O.Z)(p);t.map((function(n){n.uuid===e&&(n.inRole=!1)})),y(t),l("roles",n,{shouldDirty:!0,shouldValidate:!0}),console.info("You clicked the delete id.",a())}}},Y=t(52066),L=t(23474),P=t(30106);var z=function(e){var n=M(e),t=n.rolesItem,i=n.handleClick,l=n.handleDelete;return(0,k.jsx)("div",{children:(0,k.jsx)(Y.Z,{direction:"row",spacing:1,children:null===t||void 0===t?void 0:t.map((function(e){return e.inRole?(0,k.jsx)(F.Z,{label:e.title,onDelete:function(){return l(e.uuid)},color:"success",deleteIcon:(0,k.jsx)(L.Z,{})},e.uuid):(0,k.jsx)(F.Z,{label:e.title,onClick:function(){return i(e.uuid)},variant:"outlined",deleteIcon:(0,k.jsx)(P.Z,{})},e.uuid)}))})})},A=(0,d.ZP)(a.Z)((function(e){e.theme;return{padding:"20px"}}));var G=(0,m.Z)("userManager",p.Z)((function(e){var n=q(e),t=n.noUser,a=n.user,d=n.routeParams,m=n.methods,p=n.isMobile,y=n.form,Z=n.tabValue,j=n.handleTabChange,b=(0,D.$)("usersPage").t;return t?(0,k.jsxs)(v.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,k.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:b("THERE_IS_NO_SUCH_USER")}),(0,k.jsx)(s.Z,{className:"mt-24",component:f.Link,variant:"outlined",to:"/users-management/users",color:"inherit",children:b("GO_TO_USERS_PAGE")})]}):h.default.isEmpty(y)||a&&d.userId!==(null===a||void 0===a?void 0:a.uuid)&&"new"!==d.userId?(0,k.jsx)(l.default,{}):(0,k.jsxs)(x.RV,(0,i.Z)((0,i.Z)({},m),{},{children:[(0,k.jsx)(c.ql,{prioritizeSeoTags:!0,children:(0,k.jsx)("title",{children:b("USER_INFORMATION")})}),(0,k.jsx)(A,{header:(0,k.jsx)(S,{t:b}),content:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.Z,{value:Z,onChange:j,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64 border-b-1"},children:[(0,k.jsx)(r.Z,{className:"h-64",label:b("USER_INFORMATION")}),(0,k.jsx)(r.Z,{className:"h-64",label:b("ROLES")})]}),(0,k.jsxs)("div",{className:"p-16 sm:p-24 max-w-3xl",children:[(0,k.jsx)("div",{className:0!==Z?"hidden":"",children:(0,k.jsx)(w.Z,{model:null===a||void 0===a?void 0:a.model,t:b})}),(0,k.jsx)("div",{className:1!==Z?"hidden":"",children:(0,k.jsx)(z,{t:b})})]})]}),scroll:p?"normal":"content"})]}))}))},95338:function(e,n,t){var i=t(22042),l=t(44838),a=t(60801),s=t(25358),r=t(6706),o=t(72706),u=t(40864);n.Z=function(e){var n=e.model,t=e.t,d=(0,s.Gc)(),c=d.control,m=d.formState.errors;return(0,u.jsx)("div",{children:null===n||void 0===n?void 0:n.map((function(e){return"text"===e.type||"password"===e.type?(0,u.jsx)(s.Qr,{name:null===e||void 0===e?void 0:e.key,control:c,render:function(n){var l,a=n.field,s=a.value,r=a.onChange;return(0,u.jsx)(i.Z,{value:s||"",onChange:r,className:"mt-8 mb-16",error:!(null===m||void 0===m||!m[null===e||void 0===e?void 0:e.key]),required:null===e||void 0===e?void 0:e.required,helperText:null===m||void 0===m||null===(l=m[null===e||void 0===e?void 0:e.key])||void 0===l?void 0:l.message,label:t((0,o.upperCase)(null===e||void 0===e?void 0:e.key)),autoFocus:null===e||void 0===e?void 0:e.autoFocus,id:null===e||void 0===e?void 0:e.key,type:e.type,variant:"outlined",fullWidth:!0})}},null===e||void 0===e?void 0:e.key):"image"===e.type?(0,u.jsx)(r.Z,{element:e},null===e||void 0===e?void 0:e.key):"select"===e.type?(0,u.jsx)(s.Qr,{name:null===e||void 0===e?void 0:e.key,control:c,render:function(n){var i=n.field,s=i.onChange,r=i.value;return(0,u.jsx)(a.Z,{defaultValue:e.defautValues[0],value:r||e.defautValues[0],onChange:s,labelId:"".concat(null===e||void 0===e?void 0:e.key," + ","error-label"),className:"mt-8 mb-16",error:!(null===m||void 0===m||!m[null===e||void 0===e?void 0:e.key]),required:null===e||void 0===e?void 0:e.required,label:t((0,o.upperCase)(null===e||void 0===e?void 0:e.key)),autoFocus:null===e||void 0===e?void 0:e.autoFocus,id:null===e||void 0===e?void 0:e.key,variant:"outlined",fullWidth:!0,children:e.defautValues.map((function(e,n){return(0,u.jsx)(l.Z,{value:e,children:t(e)},n)}))})}},null===e||void 0===e?void 0:e.key):void 0}))})}},30106:function(e,n,t){var i=t(73203);n.Z=void 0;var l=i(t(75437)),a=t(40864),s=(0,l.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=s},23474:function(e,n,t){var i=t(73203);n.Z=void 0;var l=i(t(75437)),a=t(40864),s=(0,l.default)((0,a.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");n.Z=s}}]);